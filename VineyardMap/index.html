<!DOCTYPE html>
<html>
<head>
  <title>Vineyard Street Map</title>
  
  <!-- THINGS TO MAKE THE ICON WORK -->
  <link rel="image_src" href="vineyard street map screenshot.png">  
  <meta property="og:image"
    content="vineyard street map screenshot.png" />
  <link rel="icon" href="favicon.ico">
  <link rel="shortcut icon" href="favicon.ico">
	
  <link rel="stylesheet" href="../js/jquery-jvectormap-2.0.1.css" type="text/css" media="screen"/>
  <link href='../css/style.css' rel='stylesheet'>

  
  <script src="../js/jquery.js"></script>
  <script src="../js/jquery-jvectormap-2.0.1.min.js"></script>
  <script src="VineyardMap.js"></script>
  <script src="titleData.js"></script>
  <script src="occupantData.js"></script>
  <script src="positionData.js"></script>
  <script src="colourData.js"></script>

  
  <!-- IF NMJK IS READING THIS THEN I USED YOUR CODE AS A REFERENCE THANKS FOR NOT BEING MAD AT ME :)-->
  
  <style type="text/css">
	body {
		margin: 0;
		padding: 0;
	}
	#form {
		width: 35%;
		height: 95%;
		position: fixed;
		right: 0;
		top: 10px;
	}
	.buttons {
		background: none repeat scroll 0 0 #292929;
		border-radius: 3px;
		color: #ffffff;
		height: 10px;
		padding: 3px 5px;
		text-align: center;
		text-decoration: none;
	}
	#footer {
		position: fixed;
		border-top: 1px solid #464646;
		color: #464646;
		background-color: #ffdba4;
		font-size: 1em;
		padding: 0.5em 1em;
		margin: 0;
		width: 100%;
		bottom: 0;
	}
	#footer a {
		color: #2d3cff;
		font-weight: bold !important;
		text-decoration: none;
	}
  </style>
  
</head>
<body>
  <div margin: 25px 0px 0px 25px;>
  	   <h1> -Map of The Vineyard: </h1> -The census and all response data is shown on the right-hand side. <br> -Last updated: <a href="https://github.com/grimer30/VineyardMap">The GitHub is the best way to track updates.</a> Feel free to raise issues and make pull requests.
  </div>
  <div id="world-map-gdp" style="width: 100%; height: 80%; "></div>
  <script>
    $(function(){
      	$('#world-map-gdp').vectorMap({
        map: 'VineyardMap',
		backgroundColor: 'transparent',
		zoomStep: '1.5',
		regionStyle: {
			initial: {
				stroke: 'transparent',
				"stroke-width": 2,
				"stroke-opacity": 1,
				fill: '#cecece',
			},
			selected: {
				fill: '#b52400',
				stroke: 'black',
			}
		},
        regionLabelStyle: {
              initial: {
                fill: '#003300',
				"fill-opacity": '1',
				"font-size": "60%"
              },
              hover: {
                fill: 'black',
				"fill-opacity": '0.2'
              },
            },		  
        series: {
        	regions: [{
            	values: colourData,
            	scale: ['#6d00cc', '#ff8d00'],
              normalizeFunction: 'linear',
				legend: {
                  vertical: true,
                  title: 'Colours:',
                  labelRender: function(v){
                    return {
                      0: 'Vacant',
                      1: 'Occupied',
                      2: 'Special',
                      3: 'Important',
                      4: 'Main Streets',
                      5: 'Avenues',
                    }[v];
                  }
                }
				
            }]
          },
		  regionsSelectable: true,
      	  regionsSelectableOne: true,
          onRegionTipShow: function(e, el, code){
		    if (titleData[code] !== undefined) {
		  	   el.html(el.html()+ '<br>' + "<strong>Title: </strong>" + ' '+titleData[code]+'');
			}
		    if (occupantData[code] !== undefined) {
			   if (occupantData[code] == '') {
			   	  	el.html(el.html()+ '<br>' + "<strong>Currently Vacant</strong>");
			   }
			   else {
  			   		el.html(el.html()+ '<br>' + "<strong>Occupant: </strong>" + ' '+occupantData[code]+'');
			   }
			}
			if (positionData[code] !== undefined) {
		     el.html(el.html()+ '<br>' + "<strong>Position: </strong>" + ' '+positionData[code]+'');
			}
          },
        labels: {
              regions: {
                render: function(code){
					if (code == 'PORTAL') {
					   return code;
					}
					if (colourData[code] == 3) {
					   if (code.charAt(0) == 'P') {
					   	  return Wrapper(titleData[code]);
					   }
					return Wrapper(code);
					}
                	<!-- return titleData[code]; -->
                },
              }
            }
        });

    });

	function Wrapper (input) {
		var words = input.split(" ");
		var output = words.join(" \n");
		return output;
	}
  </script>
  
    <script src="slidingForm.js"></script>
    <div class="icon-menu" style="width: 5%"> CENSUS FORM </div>
  <div id="form" class="form" style="right: -35%">
     <div class="icon-close" style="width: 10%"> CLOSE FORM </div>
  	 <iframe src="https://docs.google.com/forms/d/15I4yf4jNXYhrdEeN2GlB_iVlYtmmEBaJSTLOTCE4CWQ/viewform?embedded=true" width="100%" height="50%" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>
	   <iframe src="https://docs.google.com/spreadsheets/d/1qniWmRYxK3bauUnM_2_G1u9CJBrYFa7mGv03mtzlxeY/pubhtml?widget=true&amp;headers=false" width="100%" height="50%"></iframe>
  </div>
  
  
  <div id="footer">
	<a href="http://jvectormap.com">jVectorMap</a>  by <a href="http://reddit.com/u/grimer30">grimer30</a>. Special thanks to <a href="http://reddit.com/u/nmjk">nmjk</a></a>. This map is now available on <a href="https://github.com/grimer30/VineyardMap">GitHub</a>, don't judge my code to harshly!.
</div>
</body>
</html>